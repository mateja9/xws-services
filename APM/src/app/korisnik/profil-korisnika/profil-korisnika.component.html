<div class="wrapper" style="background-image: url(./assets/img/backg.png); margin-top: -60px; ">
    <div>
        <div class="sidebar" data-color="danger" data-background-color="white">
            <div class="sidebar-background" ></div>
            <div class="logo">
                <a  class="simple-text">
                    <div class="logo-img">
                        <img src="/assets/img/logoxml.jpg" />
                    </div>
                   Nistagram
                </a>
            </div>
            <div class="sidebar-wrapper">
                <ul class="nav">
                    <li  ng-click="func()" routerLinkActive="active" class="nav-item">
                        <a  ng-click="func()"  class="nav-link sidebar-1" [routerLink]="['/korisnik']" > <i class="material-icons">person</i>
                            <p style="color: green; font-weight: 500;">My profile</p>
                        </a>
                    </li>
                    <li  ng-click="func()" routerLinkActive="active" class="nav-item">
                        <a  ng-click="func()"  class="nav-link sidebar-1" [routerLink]="['/stories']" > <i class="material-icons">donut_large</i>
                            <p style="color: green; font-weight: 500;">My stories</p>
                        </a>
                    </li>
                    <li  ng-click="func()" routerLinkActive="active" class="nav-item">
                        <a  ng-click="func()"  class="nav-link sidebar-1" [routerLink]="['/posts']" > <i class="material-icons">image</i>
                            <p style="color: green; font-weight: 500;">My posts</p>
                        </a>
                    </li>
                    
                    <li ng-click="func()" routerLinkActive="active" class="nav-item">
                        <a ng-click="func()" class="nav-link sidebar-1" [routerLink]="['/favourite']"> <i
                                class="material-icons">favorite</i>
                            <p style="color: green; font-weight: 500;">My favourites</p>
                        </a>
                    </li>

                    <li ng-click="func()" routerLinkActive="active" class="nav-item">
                        <a ng-click="func()" class="nav-link sidebar-1" [routerLink]="['/feed']"> <i
                                class="material-icons">calendar_view_week</i>
                            <p style="color: green; font-weight: 500;">My feed</p>
                        </a>
                    </li>

                    <li  ng-click="func()" routerLinkActive="active" class="nav-item">
                        <a  ng-click="func()"  class="nav-link sidebar-1" [routerLink]="['/explore']" > <i class="material-icons">explore</i>
                            <p style="color: green; font-weight: 500;">Explore Nistagram</p>
                        </a>
                    </li>
                     <li routerLinkActive="active" class="nav-item">
                        <a (click)="odjaviSe()"  class="nav-link sidebar-1" [routerLink]="['/welcome']"> <i
                                class="material-icons">logout</i>
                            <p style="color: green; font-weight: 500;">Log out</p>
                        </a>
                    </li>
                   
                  
                </ul>
            </div>
        </div>
    </div>



    <div style="margin-left:300px; margin-top:50px; padding:10px; background-color: rgb(255, 255, 255)">
        <div class="card" style="margin-top: 15px;">
            <div class="card-header card-header-success">
                <h4 class="card-title">Zahtevi za pracenje</h4>
            </div>
            <div class="card-content table-responsive table-full-width">
                <table class="table">
        
                    <thead class="text-success">
                        <th>Username</th>
                        <th></th>
                        <th></th>
                    </thead>
                    <tbody>
                        <tr *ngFor='let k of followRequests'>
                            <td><a [routerLink]="[k]">{{k}}</a></td>
                            <td> <button type="button" (click)="acceptFollow(k)">Accept</button> </td>
                            <td> <button type="button" (click)="rejectFollow(k)">Reject</button> </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        
        </div>
    <h2>My highlights</h2>

    <table class="table">
        <tbody>
            <tr *ngFor='let s of highlightStoryGroups'>
                <td>
                    <div *ngIf="s.story1.isVideo; else notVideo">
                       <video width="384" height="288" controls><source src="media/file/{{s.story1.pathOfContent}}"></video>
                    </div>

                    <ng-template #notVideo>
                      <img width="384" height="288" style="object-fit: contain" src="media/file/{{s.story1.pathOfContent}}">
                    </ng-template>
                    <!-- <p align="center">{{s.story1.tag}}</p> -->
                </td>
                <td>
                    <div *ngIf="s.story2">
                        <div *ngIf="s.story2.isVideo; else notVideo">
                           <video width="384" height="288" controls><source src="media/file/{{s.story2.pathOfContent}}"></video>
                        </div>

                        <ng-template #notVideo>
                          <img width="384" height="288" style="object-fit: contain" src="media/file/{{s.story2.pathOfContent}}">
                        </ng-template>
                        <!-- <p align="center">{{s.story2.tag}}</p> -->
                    </div>
                </td>
                <td>
                    <div *ngIf="s.story3">
                        <div *ngIf="s.story3.isVideo; else notVideo">
                           <video width="384" height="288" controls><source src="media/file/{{s.story3.pathOfContent}}"></video>
                        </div>

                        <ng-template #notVideo>
                          <img width="384" height="288" style="object-fit: contain" src="media/file/{{s.story3.pathOfContent}}">
                        </ng-template>
                        <!-- <p align="center">{{s.story3.tag}}</p> -->
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    </div>

    <div style="margin-left:300px; margin-top:50px; padding:10px; background-color: rgb(255, 255, 255)">
    <!-- <h2>Welcome back </h2> -->
    <h2>Welcome back {{korisnik.name}} {{korisnik.lastname}}</h2>
     
       
    <form (ngSubmit)="edit()" #loginForm="ngForm">
        <div class="row">
            <div class="col-sm-3">
                <h3>Username </h3>
                <div class="form-group">
                    <input type="text" value="" placeholder="E-mail" class="form-control" name="email"
                        #email="ngModel" [(ngModel)]="korisnik.email"  />
                </div>
            </div>

          

            <div class="col-sm-3">
                <h3>Name </h3>
                <div class="form-group">
                    <input type="text" value="" placeholder="First Name" class="form-control" name="firstName"
                        #firstName="ngModel" [(ngModel)]="korisnik.name"  />
                </div>
            </div>

            <div class="col-sm-3">
                <h3>Last name </h3>
                <div class="form-group">
                    <input type="text" value="" placeholder="Last Name" class="form-control" name="lastName"
                        #lastName="ngModel" [(ngModel)]="korisnik.lastname" />
                </div>
            </div>

            <div class="col-sm-3">
                <h3>Email </h3>
                <div class="form-group">
                    <input type="text" value="" placeholder="Username" class="form-control" name="city" #city="ngModel"
                        [(ngModel)]="korisnik.username" />
                </div>
            </div>

            <div class="col-sm-3">

                <h3>Phone number </h3>
                <div class="form-group">
                    <input type="text" value="" placeholder="Phone" class="form-control" name="pn"
                        #pn="ngModel" [(ngModel)]="korisnik.phoneNumber" />
                </div>
            </div>

            <div class="col-sm-3">

                <h3>Gender </h3>
                <div class="form-group">
                    <input type="text" value="" placeholder="Gender" class="form-control" name="address"
                        #address="ngModel" [(ngModel)]="korisnik.gender" />
                </div>
            </div>

            <div class="col-sm-3">

                <h3>Website </h3>
                <div class="form-group">
                    <input type="text" value="" placeholder="Website" class="form-control" name="address1"
                        #address1="ngModel" [(ngModel)]="korisnik.website" />
                </div>
            </div>
            <div class="col-sm-3">

                <h3>Biography </h3>
                <div class="form-group">
                    <input type="text" value="" placeholder="bio" class="form-control" name="bio"
                        #bio="ngModel" [(ngModel)]="korisnik.bio" />
                </div>
            </div>
            <div class="col-sm-3">

                <h3>Date of birth </h3>
                <div class="form-group">
                    <input type="text" value="" placeholder="bio1" class="form-control" name="bio1"
                        #bio1="ngModel" [(ngModel)]="korisnik.dateofb" />
                </div>
            </div>

            

            <div class="col-sm-3">
                <h3>Edit my profile</h3>
                <input type="submit" value="Submit" mat-raised-button class="btn btn-success">
            </div>

            <div class="col-sm-3">
                <h3>Change privacy</h3>
                <button (click)="changePrivacy()" mat-raised-button class="btn btn-success">{{ privacy != '' && privacy == 'Private' ? "Private" : "Public" }}</button>
            </div>

        </div>
    </form>
</div>

<div style="margin-left:300px; margin-top:50px; padding:10px; background-color: rgb(255, 255, 255)">




<h2>My public stories</h2>

<table class="table">
    <tbody>
        <tr *ngFor='let s of publicStoryGroups'>
            <td>
                <div *ngIf="s.story1.isVideo; else notVideo">
                   <video width="384" height="288" controls><source src="media/file/{{s.story1.pathOfContent}}"></video>
                </div>

                <ng-template #notVideo>
                  <img width="384" height="288" style="object-fit: contain" src="media/file/{{s.story1.pathOfContent}}">
                </ng-template>
                <!-- <p align="center">{{s.story1.tag}}</p> -->
            </td>
            <td>
                <div *ngIf="s.story2">
                    <div *ngIf="s.story2.isVideo; else notVideo">
                       <video width="384" height="288" controls><source src="media/file/{{s.story2.pathOfContent}}"></video>
                    </div>

                    <ng-template #notVideo>
                      <img width="384" height="288" style="object-fit: contain" src="media/file/{{s.story2.pathOfContent}}">
                    </ng-template>
                    <!-- <p align="center">{{s.story2.tag}}</p> -->
                </div>
            </td>
            <td>
                <div *ngIf="s.story3">
                    <div *ngIf="s.story3.isVideo; else notVideo">
                       <video width="384" height="288" controls><source src="media/file/{{s.story3.pathOfContent}}"></video>
                    </div>

                    <ng-template #notVideo>
                      <img width="384" height="288" style="object-fit: contain" src="media/file/{{s.story3.pathOfContent}}">
                    </ng-template>
                    <!-- <p align="center">{{s.story3.tag}}</p> -->
                </div>
            </td>
        </tr>
    </tbody>
</table>






<h2>My public posts</h2>

       
 <table class="table">

            <!-- <thead class="text-success">
        <th>Name <i  (click)="sort('NAME')" style="color: rgb(70, 70, 70); cursor: pointer;" class="material-icons">sort</i></th>
        <th>Last name <i  (click)="sort('LASTNAME')" style="color: rgb(70, 70, 70); cursor: pointer;" class="material-icons">sort</i></th>
        <th>Username <i  (click)="sort('USERNAME')" style="color: rgb(70, 70, 70); cursor: pointer;" class="material-icons">sort</i></th>
        
    </thead> -->
            <tbody>
                <tr *ngFor='let p of posts'>
                    <td>
                        <div *ngIf="p.isVideo; else notVideo">
                            <video width="640" height="480" controls>
                                <source src="media/file/{{p.post.pathOfContent}}">
                            </video>
                            <br>
                            <div>
                                <!--prikaz like, dislike, dugmici, lokacija, opis, tagovi ispod videa-->
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Likes: {{p.post.numberOfLikes}}</th>
                                            <th>Dislikes: {{p.post.numberOfDislikes}}</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                         
                                              <th> <button (click)="addLike(p.post.id, p.post.numberOfLikes)">Like</button></th>
                                            <th> <button type="button" click="addDislike(p.post.id, p.post.numberOfDislikes)">Dislike</button> </th>
                                            <th> <button type="button" click="addToFavourite(p.post.id)">Favourite</button> </th>
                                        </tr>
                                    </tbody>
                                </table>

                                <h3>Location: {{p.post.location}}</h3>
                                <h3>Description: {{p.post.description}}</h3>
                                <h3>Tags: {{p.post.tags}}</h3>
                                
                                <div class="card" style="margin-top: 150px;">
                                    <div class="card-header card-header-success">
                                        <h4 class="card-title">Komentari</h4>
                                    </div>
                                    <div class="card-content table-responsive table-full-width">
                                        <table class="table">

                                            <thead class="text-success">
                                                <th>Username</th>
                                                <th>Komentar</th>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor='let k of p.comments'>
                                                    <td><a [routerLink]="[k.username]">{{k.username}}</a></td>
                                                    <td>{{k.content}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                </div>
                                <div>
                                    <form>
                                        <input type="text" name="comment" [(ngModel)]="comment">
                                        <input type="submit" value="Komentarisi"
                                            (click)="addComment(p.post.id)">
                                    </form>
                                </div>
                            </div>

                            <br><br>
                        </div>

                        <ng-template #notVideo>
                            <img width="640" height="480" style="object-fit: contain"
                                src="media/file/{{p.post.pathOfContent}}">
                            <br>
                            <div>

                                <div>
                                    <!--prikaz ispod slike, like,dislike, dugmici, lokacija, opis, tagovi-->
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>Likes: {{p.post.numberOfLikes}}</th>
                                                <th>Dislikes: {{p.post.numberOfDislikes}}</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <th> <button type="button" (click)="addLike(p.post.id, p.post.numberOfLikes)">Like</button> </th>
                                                <th> <button type="button" (click)="addDislike(p.post.id, p.post.numberOfDislikes)">Dislike</button> </th>
                                                <th> <button type="button" (click)="addToFavourite(p.post.id)">Favourite</button> </th>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <h3>Location: {{p.location}}</h3>
                                    <h3>Description: {{p.description}}</h3>
                                    <h3>Tags: {{p.tags}}</h3>

                                    <!--prikaz komentara-->

                                    <div class="card" style="margin-top: 150px;">
                                        <div class="card-header card-header-success">
                                            <h4 class="card-title">Komentari</h4>
                                        </div>
                                        <div class="card-content table-responsive table-full-width">
                                            <table class="table">

                                                <thead class="text-success">
                                                    <th>Username</th>
                                                    <th>Komentar</th>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor='let k of p.comments'>
                                                        <td><a [routerLink]="[k.username]">{{k.username}}</a></td>
                                                        <td>{{k.content}}</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>

                                    </div>
                                    <div>
                                        <form>
                                            <input type="text" name="comment" [(ngModel)]="comment">
                                            <input type="submit" value="Komentarisi"
                                                (click)="addComment(p.post.id)">
                                        </form>
                                    </div>
                                </div>
                            </div>

                            <br><br>
                        </ng-template>
                    </td>
                </tr>

            </tbody>
        </table>




</div>
</div>
